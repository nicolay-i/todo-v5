# Дерево задач

Интерфейс для управления задачами с вложенностью до трёх уровней. Приложение на Next.js с серверным бэкендом на Prisma/PostgreSQL, поддерживает перетаскивание элементов между уровнями и аккуратный светлый интерфейс на Tailwind CSS.

## Возможности
- вложенные задачи до трёх уровней глубины;
- drag-and-drop сортировка и перемещение между уровнями;
- добавление, редактирование, удаление элементов;
- отметка задач как выполненных и снятие отметки;
- минималистичный светлый дизайн с иконками вместо текстовых кнопок.
 - закреплённые слоты (например, на дни) с возможностью сворачивания/разворачивания.

## Технологии
- Next.js 14 + TypeScript;
- Prisma ORM и PostgreSQL для хранения данных;
- MobX для клиентского состояния;
- Tailwind CSS для стилизации;
- HTML5 drag-and-drop.

## Быстрый старт
```bash
pnpm install
pnpm prisma migrate status
# если миграции не применены:
pnpm prisma migrate deploy
pnpm dev
```

Приложение будет доступно на `http://localhost:3000`.

## Полезные скрипты
- `pnpm dev` — запуск дев-сервера Next.js;
- `pnpm build` — сборка production-версии;
- `pnpm start` — запуск собранного приложения;
- `pnpm lint` — проверка кода ESLint;
- `pnpm prisma migrate deploy` — применение миграций к базе данных;
- `pnpm prisma:generate` — генерация типов Prisma.

## Структура проекта
```
src/
  app/           // Next.js App Router, серверные и API роуты
  components/    // визуальные компоненты (элемент списка, дроп-зоны)
  lib/           // Prisma клиент и бизнес-логика
  stores/        // MobX store и контекст
```

## Перетаскивание
Перетаскивание реализовано на чистом HTML5 drag-and-drop. Доступные точки сброса отображаются только во время перетаскивания и учитывают ограничения по глубине вложенности.

## Сворачиваемые слоты на день
- В заголовке слота доступна кнопка со стрелкой для сворачивания/разворачивания списка задач.
- Число рядом с названием показывает количество задач в слоте.
- Состояние свёрнутости сохраняется локально (localStorage) и восстанавливается при перезагрузке страницы.

## Навигация по вкладкам через URL
Активная вкладка интерфейса синхронизируется с параметром URL `?tab=`. Поддерживаемые значения:
- `pinned` — Слоты;
- `all` — Список задач;
- `settings` — Настройки.

Примеры:
- `http://localhost:3000/?tab=all` — открыть страницу со вкладкой «Список задач»;
- навигация «Назад/Вперёд» корректно восстанавливает активную вкладку.
